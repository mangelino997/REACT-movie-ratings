(this["webpackJsonpmovies-rate"]=this["webpackJsonpmovies-rate"]||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/error-404.2df31fb3.png"},22:function(e,t,a){e.exports=a.p+"static/media/no-img.5405d77c.png"},38:function(e,t,a){e.exports=a.p+"static/media/popcorn.df41da6b.png"},39:function(e,t,a){e.exports=a.p+"static/media/popcorn2.6d4b23b5.png"},40:function(e,t,a){e.exports=a(71)},45:function(e,t,a){},46:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(35),r=a.n(l),i=(a(45),a(3)),s=a(1),o=(a(46),a(22)),m=a.n(o),u=a(7),d=a(2),v=function(e){return n.createElement("svg",Object.assign({height:21,viewBox:"0 0 21 21",width:21},e),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"#2a2e3b",strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(3 2)"},n.createElement("circle",{cx:8.5,cy:8.5,r:8}),n.createElement("path",{d:"M9.5 11.499l3-3-3-3M12.5 8.5h-8"})))},f=function(e){var t=e.movie;return c.a.createElement("div",{className:"col-6 col-md-3"},c.a.createElement("div",{className:"card card-block flip-card"},c.a.createElement("div",{className:"flip-card-inner"},c.a.createElement("div",{className:"flip-card-front"},c.a.createElement("img",{src:t.imageURL,className:"imageURL",alt:"movie"})),c.a.createElement("div",{className:"flip-card-back"},c.a.createElement("p",{className:"title-back-card"},t.title),c.a.createElement(u.b,{to:"/details/".concat(t._id),className:"bottom-right"},c.a.createElement("span",null,"details"),c.a.createElement(v,null))))))},E=a(4),p=a.n(E),b=a(8),g=a(6),h=a.n(g),N=function(e,t){return t.reduce((function(t,a){return a.idMovie===e&&(t.count++,t.totalRating=parseFloat(t.totalRating)+a.stars,t.value=(t.totalRating/t.count).toFixed(2)),t}),{count:0,totalRating:0,value:0})},y=Object(n.createContext)(),w=function(e){var t=e.children,a=Object(n.useState)([]),l=Object(s.a)(a,2),r=(l[0],l[1]),o=Object(n.useState)([]),m=Object(s.a)(o,2),u=m[0],d=m[1],v=Object(n.useState)([]),f=Object(s.a)(v,2),E=f[0],g=f[1],w=Object(n.useState)(null),j=Object(s.a)(w,2),k=j[0],O=j[1],x=Object(n.useState)(!1),M=Object(s.a)(x,2),S=M[0],L=M[1],F=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/movies",t).then((function(e){e.data.movieStored.ratingData={count:0,totalRating:0,value:0};var t=[e.data.movieStored].concat(Object(i.a)(u));d(t)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.delete("/movies/".concat(t)).then((function(e){var a=u.filter((function(e){return e._id!==t}));return d(a),!0})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/ratings",t).then((function(e){var t=[e.data.rated].concat(Object(i.a)(E));g(t)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.delete("/ratings/".concat(t)).then((function(e){var a=E.filter((function(e){return e._id!==t}));g(a)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){u.map((function(e){e.ratingData=N(e._id,E)})),d(u),r(u)};Object(n.useEffect)((function(){h.a.get("movies").then((function(e){d(e.data?e.data.movies:[]),h.a.get("ratings").then((function(e){g(e.data?e.data.ratings:[])})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){D()}),[E]);var q={movieList:u,ratingsList:E,movieListSearch:k,loadingSearchMovies:S,searchMoviesList:function(e){L(!0);var t=e.trim().toLowerCase(),a=u.filter((function(e){return e.title.toLowerCase().trim().includes(t.toLowerCase().trim())}));setTimeout((function(){L(!1),O(a)}),1800)},clearSearchMoviesList:function(){L(!0),setTimeout((function(){L(!1),O(null)}),1800)},addNewMovie:F,updateMovie:function(e,t){L(!0),h.a.put("/movies/".concat(t),e).then((function(t){var a=u;a.map((function(a,n){a._id===e._id&&u.splice(n,1,t.data.movieUpdated)})),d(a),D(),setTimeout((function(){L(!1)}),1800)})).catch((function(e){return console.log(e),e.status}))},deleteMovie:R,deleteMovieRated:T,addNewRatedMovie:C};return c.a.createElement(y.Provider,{value:q},t)},j=y,k=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],l=t[1],r=Object(n.useContext)(j),i=r.searchMoviesList,o=r.clearSearchMoviesList;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"input-group input-group-sm mb-3 "},c.a.createElement("input",{type:"text",className:"form-control",minLength:1,value:a,placeholder:"Example: John Wick","aria-label":"Recipient's username","aria-describedby":"basic-addon2",onChange:function(e){return function(e){l(e.target.value)}(e)}}),c.a.createElement("div",{className:"input-group-append"},c.a.createElement("button",{disabled:!a,onClick:function(){i(a)},className:"btn btn-outline-primary",type:"button"},"Search"),c.a.createElement("button",{disabled:!a,className:"btn btn-outline-secondary",onClick:function(){l(""),o()},type:"button"},"Reset"))))};var O=function(e){return n.createElement("svg",Object.assign({height:21,viewBox:"0 0 21 21",width:21},e),n.createElement("path",{d:"M10.5 14.5l-5 3 2-5.131-4-3.869h5l2-5 2 5h5l-4 4 2 5z",fill:"current",stroke:"current",strokeLinecap:"round",strokeLinejoin:"round"}))},x=a(37),M=a(14),S=Object(n.createContext)(),L={role:"",credentials:{},authenticated:!1,error:""},F=function(e){var t=e.children,a=Object(n.useState)(L),l=Object(s.a)(a,2),r=l[0],i=l[1],o=function(e){localStorage.clear(),localStorage.setItem("Token","Bearer ".concat(e)),h.a.defaults.headers.common.Authorization=localStorage.getItem("Token")},m=function(){h.a.get("/user").then((function(e){var t={credentials:e.data.userData.credentials,authenticated:!0,error:""};i(t)})).catch((function(e){return console.log(e)}))},u={user:r,signin:function(e,t){h.a.post("/signin",e).then((function(e){o(e.data.token),m(),t.push("/")})).catch((function(e){i(Object(M.a)(Object(M.a)({},r),{},{error:e.response.data.message}))}))},logout:function(e){localStorage.removeItem("Token"),delete h.a.defaults.headers.common.Authorization,i(L),e.push("/login")},signup:function(e,t){h.a.post("/signup",e).then((function(e){o(e.data.token),m(),t.push("/")})).catch((function(e){i(Object(M.a)(Object(M.a)({},r),{},{error:e.response.data.message}))}))},getUserData:m};return c.a.createElement(S.Provider,{value:u},t)},R=S,C=function(){var e=Object(n.useContext)(R),t=e.logout,a=e.getUserData,l=Object(d.g)(),r=Object(n.useContext)(j),i=r.movieList,s=r.movieListSearch,o=r.clearSearchMoviesList,m=r.loadingSearchMovies,E=s||i,p=i.length>20?i.splice(20,i.length-20):i;Object(n.useEffect)((function(){o();var e=localStorage.getItem("Token");e&&(1e3*Object(x.a)(e).exp<Date.now()?t(l):(h.a.defaults.headers.common.Authorization=e,a()))}),[]),Object(n.useEffect)((function(){i.sort((function(e,t){var a,n;return(null===(a=e.ratingData)||void 0===a?void 0:a.value)<(null===(n=t.ratingData)||void 0===n?void 0:n.value)?1:-1}))}),[i]);var b=m?c.a.createElement("div",{className:"row justify-content-center py-5"},c.a.createElement("div",{className:"sk-folding-cube "},c.a.createElement("div",{className:"sk-cube1 sk-cube"}),c.a.createElement("div",{className:"sk-cube2 sk-cube"}),c.a.createElement("div",{className:"sk-cube4 sk-cube"}),c.a.createElement("div",{className:"sk-cube3 sk-cube"}))):c.a.createElement("div",null,s?0===s.length&&c.a.createElement("small",{style:{color:"#FF4E56"}},"Not found"):null,c.a.createElement("div",{className:"row flex-nowrap overflow-auto"},E.map((function(e){return c.a.createElement(f,{key:e._id,movie:e})}))),c.a.createElement("p",{className:"title-movies my-3"},"Top Ranking"));return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"title-movies my-5"},"Movies"),c.a.createElement("div",{className:"row my-1"},c.a.createElement("div",{className:"col-10 col-md-5 "},c.a.createElement(k,null))),b,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-5 table-responsive-sm"},c.a.createElement("table",{className:"table table-sm"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"#"),c.a.createElement("th",{scope:"col"},"Rating"),c.a.createElement("th",{scope:"col"},"Title"),c.a.createElement("th",{scope:"col"},"-"))),c.a.createElement("tbody",null,p.map((function(e,t){var a;return c.a.createElement("tr",{key:e._id},c.a.createElement("th",{scope:"row"},t+1),c.a.createElement("td",null,null===(a=e.ratingData)||void 0===a?void 0:a.value,c.a.createElement(O,{key:t,className:"rotate-vert-center",width:18,height:18,stroke:"#FF8222",fill:"#FF8222"})),c.a.createElement("td",null,e.title),c.a.createElement("td",null,c.a.createElement(u.b,{to:"/details/".concat(e._id)},c.a.createElement("span",null,"details"),c.a.createElement(v,null))))})))))))},T=a(17),D=a(38),q=a.n(D),_=function(){var e=Object(T.a)(),t=e.register,a=e.handleSubmit,l=(e.watch,e.errors),r=Object(n.useContext)(R),i=r.signin,s=r.user,o=Object(d.g)();return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row justify-content-center my-5"},c.a.createElement("div",{className:"col-md-6 card-login"},c.a.createElement("div",{className:"row justify-content-center"},c.a.createElement("div",{className:"py-2 text-center"},c.a.createElement("img",{className:"mb-4",src:q.a,alt:"",width:"76",height:"76"}),c.a.createElement("h1",{className:"title-login mb-3 font-weight-normal"},"Welcome"))),c.a.createElement("div",{className:"row justify-content-center my-4"},c.a.createElement("div",{className:"col"},c.a.createElement("form",{onSubmit:a((function(e){i(e,o)}))},c.a.createElement("div",{className:""},c.a.createElement("input",{id:"validationServer03",name:"email",type:"email",placeholder:"user@gmail.com",className:"form-control input-login",ref:t({required:!0})}),l.email&&c.a.createElement("p",{id:"validationServer03Feedback",className:"invalid-feedback"},"This field is required")),c.a.createElement("br",null),c.a.createElement("div",{className:""},c.a.createElement("input",{name:"password",type:"password",placeholder:"password",className:"form-control input-login",ref:t({required:!0})}),l.password&&c.a.createElement("p",{id:"validationServer03Feedback",className:"invalid-feedback"},"This field is required")),c.a.createElement("br",null),s.error&&c.a.createElement("p",{className:"invalid-feedback"},s.error),c.a.createElement("div",{className:"row my-1"},c.a.createElement("div",{className:"col-md-3"},c.a.createElement("button",{className:"btn btn-sm btn-login btn-primary",type:"submit"},"Login")),c.a.createElement("div",{className:"col-md-9"},c.a.createElement("span",null,"Don't have an account? "),c.a.createElement(u.b,{to:"/signup",className:"signin-login"}," Sign in here")))))))))},U=a(39),A=a.n(U),I=function(){var e=Object(T.a)(),t=e.register,a=e.handleSubmit,l=(e.watch,e.errors),r=Object(n.useContext)(R),i=r.signup,s=r.user,o=Object(d.g)();return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row justify-content-center my-5"},c.a.createElement("div",{className:"col-md-6 card-login"},c.a.createElement("div",{className:"row justify-content-center"},c.a.createElement("div",{className:"py-2 text-center"},c.a.createElement("img",{className:"mb-4",src:A.a,alt:"",width:"76",height:"76"}),c.a.createElement("h1",{className:"title-login mb-3 font-weight-normal"},"Sign Up"))),c.a.createElement("div",{className:"row justify-content-center my-4"},c.a.createElement("div",{className:"col"},c.a.createElement("form",{onSubmit:a((function(e){i(e,o)}))},c.a.createElement("div",{className:""},c.a.createElement("input",{name:"username",type:"text",placeholder:"username",className:"form-control input-login",ref:t({required:!0})}),l.username&&c.a.createElement("span",{className:"invalid-feedback"},"This field is required")),c.a.createElement("br",null),c.a.createElement("div",{className:""},c.a.createElement("input",{name:"email",type:"email",placeholder:"email",className:"form-control input-login",ref:t({required:!0})}),l.email&&c.a.createElement("span",{className:"invalid-feedback"},"This field is required")),c.a.createElement("br",null),c.a.createElement("div",{className:""},c.a.createElement("input",{name:"password",type:"password",placeholder:"password",className:"form-control input-login",ref:t({required:!0})}),l.password&&c.a.createElement("span",{className:"invalid-feedback"},"This field is required")),c.a.createElement("br",null),s.error&&c.a.createElement("p",{className:"invalid-feedback"},s.error),c.a.createElement("div",{className:"row my-1"},c.a.createElement("div",{className:"col-md-3"},c.a.createElement("button",{className:"btn btn-sm btn-login btn-primary",type:"submit"},"Signup")),c.a.createElement("div",{className:"col-md-9"},c.a.createElement("span",null,"Have an account? "),c.a.createElement(u.b,{to:"/login",className:"signin-login"}," Login here")))))))))},B=a(20),z=a.n(B),V=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row justify-content-center "},c.a.createElement("div",{className:"col text-center"},c.a.createElement("img",{src:z.a,height:300,width:300})))))},J=(a(70),function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),l=a[0],r=a[1],o=Object(n.useState)(0),m=Object(s.a)(o,2),u=m[0],d=m[1],v=Object(n.useContext)(R).user;return Object(n.useEffect)((function(){}),[l]),c.a.createElement("div",null,Object(i.a)(Array(10)).map((function(e,t){var a=t+1;return c.a.createElement("label",{key:t},c.a.createElement("input",{type:"radio",name:"rating",value:a,onClick:function(){return r(a)}}),c.a.createElement(O,{className:"star",width:26,height:26,stroke:a<=(l||u)?"#FF8222":null,fill:a<=(l||u)?"#FF8222":null,onMouseEnter:function(){return d(a)},onMouseLeave:function(){return d(0)}}))})),c.a.createElement("div",{className:"text-center"},c.a.createElement("h4",null,l," stars"),c.a.createElement("button",{type:"button",onClick:function(){return function(){if(v.credentials.email){var t={emailUser:v.credentials.email,idMovie:e.idMovie,stars:l};e.newScore(l,t)}else alert("You must Sign In")}()},disabled:0===l,className:"btn btn-sm btn-success btn-login btn-success-shadow"},"Rank"),c.a.createElement("button",{type:"button",className:"btn btn-sm btn-secondary btn-login ml-2 btn-second-shadow",onClick:function(){return r(0)}},"Reset")))}),H=function(e,t){return t.find((function(t){return t._id===e}))};var P=function(e){return n.createElement("svg",Object.assign({height:40,viewBox:"0 0 21 21",width:40},e),n.createElement("g",{fill:"current",fillRule:"evenodd",stroke:"current",strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(2 2)"},n.createElement("circle",{cx:8.5,cy:8.5,r:8}),n.createElement("path",{d:"M5.5 9.5l2 2 5-5"})))};var W=function(e){return n.createElement("svg",Object.assign({height:40,viewBox:"0 0 21 21",width:40},e),n.createElement("g",{fill:"current",fillRule:"evenodd",stroke:"current",strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(2 2)"},n.createElement("circle",{cx:8.5,cy:8.5,r:8}),n.createElement("path",{d:"M5.5 5.5l6 6M11.5 5.5l-6 6"})))},Y=function(e){return c.a.createElement("div",{id:"toast",className:"success"===e.type?"show success":"show error"},c.a.createElement("div",{id:"img",className:"success"===e.type?"success":"error"},"success"===e.type?c.a.createElement(P,{stroke:"#fff",fill:"#28a745"}):c.a.createElement(W,{stroke:"#fff",fill:"#DD4535"})),c.a.createElement("div",{id:"desc"},e.message))},G={show:!1,type:"",message:""},K=function(){var e,t,a,l,r,i,o,m,u=Object(n.useContext)(j),v=u.movieList,f=u.addNewRatedMovie,E=Object(d.g)(),p=Object(n.useState)(G),b=Object(s.a)(p,2),g=b[0],h=b[1],N=Object(n.useState)(0),y=Object(s.a)(N,2),w=y[0],k=y[1],x=Object(d.h)().movieId;v.length>0&&(m=H(x,v));return Object(n.useEffect)((function(){if(0!==v.length){var e=m.ratingData?m.ratingData.value:0;k(e)}else E.push("/")}),[]),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row justify-content-center py-2"},c.a.createElement("div",{className:"col-12 col-md-6"},c.a.createElement("img",{className:"card swing-in-top-fwd card-img-bottom",src:null===(e=m)||void 0===e?void 0:e.imageURL,alt:"Card image cap"})),c.a.createElement("div",{className:"col-12 col-md-4"},c.a.createElement("div",{className:"text-center"},c.a.createElement("h1",{className:"card-title"},null===(t=m)||void 0===t?void 0:t.title),c.a.createElement("h6",null,null===(a=m)||void 0===a?void 0:a.director)),c.a.createElement("div",{className:"text-center py-3"},c.a.createElement(J,{idMovie:null===(l=m)||void 0===l?void 0:l._id,newScore:function(e,t){try{f(t),m.ratingData.count++,m.ratingData.totalRating+=e,m.value=m.ratingData.totalRating/m.ratingData.count,k(m.value.toFixed(2));h({show:!0,type:"success",message:"Movie rated successful"}),setTimeout((function(){h(G)}),5e3)}catch(a){h({show:!0,type:"error",message:"Movie not rated"}),setTimeout((function(){h(G)}),5e3)}}})),c.a.createElement("div",{className:"row justify-content-center text-center"},c.a.createElement("div",{className:"col"},c.a.createElement("h5",null,null===(r=m)||void 0===r?void 0:r.year),c.a.createElement("small",null,"Year")),c.a.createElement("div",{className:"col"},c.a.createElement("h5",null,null===(i=m)||void 0===i?void 0:i.rated),c.a.createElement("small",null,"Rated")),c.a.createElement("div",{className:"col"},c.a.createElement("h5",null,w,c.a.createElement(O,{className:"star",width:26,height:26,stroke:"#FF8222",fill:"#FF8222"})),c.a.createElement("small",null,"Rating"))),c.a.createElement("div",{className:"text-center py-3"},c.a.createElement("p",{className:"card-text"},null===(o=m)||void 0===o?void 0:o.plot)))),g.show&&c.a.createElement(Y,{type:g.type,message:g.message}))};var Q=function(e){return n.createElement("svg",Object.assign({height:21,viewBox:"0 0 21 21",width:21},e),n.createElement("g",{fill:"current",fillRule:"evenodd",stroke:"current",strokeLinecap:"round",strokeLinejoin:"round"},n.createElement("path",{d:"M17 4a2.121 2.121 0 010 3l-9.5 9.5-4 1 1-3.944 9.504-9.552A2.116 2.116 0 0117 4zM15.5 6.5l1 1"})))};var X=function(e){return n.createElement("svg",Object.assign({height:21,viewBox:"0 0 21 21",width:21},e),n.createElement("g",{fill:"current",fillRule:"evenodd",stroke:"current",strokeLinecap:"round",strokeLinejoin:"round"},n.createElement("path",{d:"M5.5 4.5h10v12a2 2 0 01-2 2h-6a2 2 0 01-2-2zm5-2a2 2 0 012 2h-4a2 2 0 012-2zM3.5 4.5h14M8.5 7.5v8M12.5 7.5v8"})))},Z={show:!1,type:"",message:""},$=function(){var e=Object(d.g)(),t=Object(n.useState)(Z),a=Object(s.a)(t,2),l=a[0],r=a[1],i=Object(n.useState)(null),o=Object(s.a)(i,2),m=o[0],u=o[1],v=Object(n.useContext)(R).logout,f=Object(T.a)(),E=f.reset,p=f.register,b=f.handleSubmit,g=f.errors,h=Object(n.useContext)(j),N=h.movieList,y=h.movieListSearch,w=h.loadingSearchMovies,x=h.addNewMovie,S=h.updateMovie,L=h.deleteMovie,F=y||N,C=(null===m||void 0===m?void 0:m.title)?"Update movie":"Add movie",D=w?c.a.createElement("div",{className:"row justify-content-center py-5"},c.a.createElement("div",{className:"sk-folding-cube "},c.a.createElement("div",{className:"sk-cube1 sk-cube"}),c.a.createElement("div",{className:"sk-cube2 sk-cube"}),c.a.createElement("div",{className:"sk-cube4 sk-cube"}),c.a.createElement("div",{className:"sk-cube3 sk-cube"}))):null;return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},c.a.createElement("h4",null,"ADMIN"),c.a.createElement("button",{className:"mb-md-0 btn btn-sm btn-secondary",onClick:function(){return v(e)}},"Logout")),c.a.createElement("div",{className:"row justify-content-center"},c.a.createElement("div",{className:"col-md-4"},c.a.createElement("img",null))),c.a.createElement("div",{className:"row my-1"},c.a.createElement("div",{className:"col-md-6 card-login py-3"},c.a.createElement("div",{className:"row justify-content-center my-1"},c.a.createElement("div",{className:"col"},c.a.createElement("form",{onSubmit:b((function(e){var t=e.image?e.image[0]:null,a=new FormData;if(a.append("title",e.title),a.append("year",e.year),a.append("rated",e.rated),a.append("director",e.director),a.append("plot",e.plot),a.append("image",t),null===m||void 0===m?void 0:m._id)try{e.image=null,e.imageURL=m.imageURL,e._id=m._id,S(e,m._id);r({show:!0,type:"success",message:"Movie update successful"}),u(null),E(),setTimeout((function(){r(Z)}),5e3)}catch(n){r({show:!0,type:"error",message:"Movie not update"}),setTimeout((function(){r(Z)}),5e3)}else try{x(a);r({show:!0,type:"success",message:"Movie added successful"}),E(),setTimeout((function(){r(Z)}),5e3)}catch(n){r({show:!0,type:"error",message:"Movie not added"}),setTimeout((function(){r(Z)}),5e3)}}))},c.a.createElement("div",{className:"form-row"},c.a.createElement("div",{className:"col"},c.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"title",name:"title",defaultValue:null===m||void 0===m?void 0:m.title,ref:p({required:!0})}),g.title?c.a.createElement("div",{className:"invalid-feedback"},"This field is required"):c.a.createElement("br",null))),c.a.createElement("div",{className:"form-row"},c.a.createElement("div",{className:"col"},c.a.createElement("input",{type:"number",className:"form-control form-control-sm",placeholder:"year",name:"year",defaultValue:null===m||void 0===m?void 0:m.year,ref:p({required:!0})}),g.year&&c.a.createElement("div",{className:"invalid-feedback"},"This field is required")),c.a.createElement("div",{className:"col"},c.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"rated",name:"rated",defaultValue:null===m||void 0===m?void 0:m.rated,ref:p({required:!0})}),g.rated&&c.a.createElement("div",{className:"invalid-feedback"},"This field is required")),c.a.createElement("div",{className:"col"},c.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"director",name:"director",defaultValue:null===m||void 0===m?void 0:m.director,ref:p({required:!0})}),g.director&&c.a.createElement("div",{className:"invalid-feedback"},"This field is required"))),c.a.createElement("br",null),c.a.createElement("div",{className:"form-row"},c.a.createElement("div",{className:"col"},c.a.createElement("textarea",{rows:3,placeholder:"plot",className:"form-control",name:"plot",defaultValue:null===m||void 0===m?void 0:m.plot,ref:p({required:!0})}),g.plot&&c.a.createElement("div",{className:"invalid-feedback"},"This field is required"))),c.a.createElement("br",null),c.a.createElement("div",{className:"form-row"},c.a.createElement("div",{className:"col"},c.a.createElement("input",{type:"file",id:"validatedCustomFile",name:"image",onChange:function(e){return t=e,void u(Object(M.a)(Object(M.a)({},m),{},{imageURL:URL.createObjectURL(t.target.files[0])}));var t},disabled:null===m||void 0===m?void 0:m._id,ref:p}),g.image&&c.a.createElement("div",{className:"invalid-feedback"},"This field is required"))),c.a.createElement("br",null),c.a.createElement("button",{className:"btn btn-sm btn-success",type:"submit"},C))))),c.a.createElement("div",{className:"col-md-5 card-login py-3"},c.a.createElement("div",{className:"text-center my-auto"},c.a.createElement("img",{height:"auto",width:200,src:null===m||void 0===m?void 0:m.imageURL,alt:"movie image"})))),c.a.createElement("div",{className:"row my-1"},c.a.createElement("div",{className:"col-10 col-md-5 "},c.a.createElement(k,null),D)),!w&&c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"table-responsive-sm"},c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"#"),c.a.createElement("th",{scope:"col"},"Rating"),c.a.createElement("th",{scope:"col"},"Title"),c.a.createElement("th",{scope:"col"},"-"),c.a.createElement("th",{scope:"col"},"-"))),c.a.createElement("tbody",null,F.map((function(e,t){var a;return c.a.createElement("tr",{key:t},c.a.createElement("th",{scope:"row"},t+1),c.a.createElement("td",null,null===(a=e.ratingData)||void 0===a?void 0:a.value,c.a.createElement(O,{key:t,className:"rotate-vert-center",width:18,height:18,stroke:"#FF8222",fill:"#FF8222"})),c.a.createElement("td",null,e.title),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(){u(e)},className:"btn btn-sm btn-primary btn-primary-shadow"},c.a.createElement(Q,{stroke:"#fff",fill:"#fff"}))),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(){return function(e){try{L(e);u(null),E(),r({show:!0,type:"success",message:"Movie deleted successful"}),setTimeout((function(){r(Z)}),5e3)}catch(t){r({show:!0,type:"error",message:"Movie not deleted"}),setTimeout((function(){r(Z)}),5e3)}}(e._id)},className:"btn btn-sm btn-danger btn-danger-shadow"},c.a.createElement(X,{stroke:"#fff",fill:"#fff"}))))})))))),l.show&&c.a.createElement(Y,{type:l.type,message:l.message}))},ee={show:!1,type:"",message:""},te=function(){var e=Object(d.g)(),t=Object(n.useState)(ee),a=Object(s.a)(t,2),l=a[0],r=a[1],i=Object(n.useState)([]),o=Object(s.a)(i,2),m=o[0],u=o[1],v=Object(n.useContext)(R).logout,f=Object(n.useContext)(j),E=f.ratingsList,p=f.movieList,b=f.loadingSearchMovies,g=f.deleteMovieRated,h=Object(n.useContext)(R).user;return Object(n.useEffect)((function(){var e=E.filter((function(e){return e.emailUser===h.credentials.email}));console.log(e),e.map((function(e){var t=H(e.idMovie,p);console.log(t),e.titleMovie=t.title})),u(e)}),[E]),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},c.a.createElement("h4",null,"USER"),c.a.createElement("button",{className:"mb-md-0 btn btn-sm btn-secondary",onClick:function(){return v(e)}},"Logout")),c.a.createElement("div",{className:"row justify-content-center"},c.a.createElement("div",{className:"col-md-4"},c.a.createElement("img",null))),c.a.createElement("h5",null,"My qualifications"),!b&&c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"table-responsive-sm"},c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"#"),c.a.createElement("th",{scope:"col"},"Stars"),c.a.createElement("th",{scope:"col"},"Title"),c.a.createElement("th",{scope:"col"},"Delete my rating"))),c.a.createElement("tbody",null,m.map((function(e,t){return c.a.createElement("tr",{key:e._id},c.a.createElement("th",{scope:"row"},t+1),c.a.createElement("td",null,e.stars,c.a.createElement(O,{key:t,className:"rotate-vert-center",width:18,height:18,stroke:"#FF8222",fill:"#FF8222"})),c.a.createElement("td",null,e.titleMovie),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(){return function(e){try{g(e);r({show:!0,type:"success",message:"Rated movie deleted successful"}),setTimeout((function(){r(ee)}),5e3)}catch(t){r({show:!0,type:"error",message:"Rated movie not deleted"}),setTimeout((function(){r(ee)}),5e3)}}(e._id)},className:"btn btn-sm btn-danger btn-danger-shadow"},c.a.createElement(X,{stroke:"#fff",fill:"#fff"}))))})))))),l.show&&c.a.createElement(Y,{type:l.type,message:l.message}))},ae=function(){var e=Object(n.useContext)(R).user,t=Object(n.useContext)(j).clearSearchMoviesList;return Object(n.useEffect)((function(){return t}),[]),e.credentials?"ADMIN"===e.credentials.role?c.a.createElement($,null):c.a.createElement(te,null):c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row justify-content-center "},c.a.createElement("div",{className:"col text-center"},c.a.createElement("img",{src:z.a,height:300,width:300}))),c.a.createElement("div",{className:"row justify-content-center my-2"},c.a.createElement("div",{className:"col text-center"},c.a.createElement("button",{className:"btn btn-primary"},c.a.createElement(u.b,{to:"/login",className:"link-in-button"},"Login")))))},ne=function(){var e,t=Object(n.useContext)(R).user;return Object(n.useEffect)((function(){}),[t]),c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,null,c.a.createElement("div",{className:"topnav"},c.a.createElement(u.b,{to:"/"},"Home "),t.authenticated?c.a.createElement(u.b,{to:"/dashboard",className:"chip icon"},c.a.createElement("img",{src:t.credentials?t.credentials.avatar:m.a,className:"userLogo"}),c.a.createElement("small",null,null===(e=t.credentials)||void 0===e?void 0:e.username)):c.a.createElement(c.a.Fragment,null,c.a.createElement(u.b,{to:"/login"}," Login "),c.a.createElement(u.b,{to:"/signup"}," Signup "),c.a.createElement(u.b,{to:"/login",className:"chip icon"},c.a.createElement("img",{src:m.a,className:"userLogo"})))),c.a.createElement(d.d,null,c.a.createElement(d.b,{exact:!0,path:"/",component:C}),c.a.createElement(d.b,{path:"/details/:movieId",component:K}),t.authenticated?c.a.createElement(c.a.Fragment,null,c.a.createElement(d.b,{path:"/dashboard",component:ae})):c.a.createElement(c.a.Fragment,null,c.a.createElement(d.b,{path:"/login",component:_}),c.a.createElement(d.b,{path:"/signup",component:I}),c.a.createElement(d.a,{to:"/login"})),c.a.createElement(d.b,{component:V}))))};h.a.defaults.baseURL="https://app-rest-movies-ratings.herokuapp.com/v1";var ce=function(){var e=Object(n.useState)({value:!0}),t=Object(s.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){setTimeout((function(){l({value:!1})}),3e3)}),[]),c.a.createElement(c.a.Fragment,null,a.value?c.a.createElement("div",{className:"App bg-color-red"},c.a.createElement("div",{className:"container container-loading"},c.a.createElement("div",{className:"row justify-content-center align-items-center "},c.a.createElement("div",{className:"col-12 my-auto col-md-12 text-center"},c.a.createElement("p",{className:"title-loading-movies text-pop-up-top"},"MOVIES"),c.a.createElement("p",{className:"title-loading-movies text-pop-up-top"},"RATING"),c.a.createElement("div",{className:"text-center"},Object(i.a)(Array(5)).map((function(e,t){var a=5-t;return c.a.createElement(O,{key:t,className:"roll-in-left-"+a,width:50,height:50,stroke:"#FF8222",fill:"#FF8222"})}))))))):c.a.createElement("div",{className:"App"},c.a.createElement(F,null,c.a.createElement(w,null,c.a.createElement(ne,null)))))};r.a.render(c.a.createElement(ce,null),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.b27aa228.chunk.js.map